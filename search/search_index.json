{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"stac-fastapi-pgstac","text":"<p>PgSTAC backend for stac-fastapi, the FastAPI implementation of the STAC API spec</p>"},{"location":"#overview","title":"Overview","text":"<p>stac-fastapi-pgstac is an HTTP interface built in FastAPI. It validates requests and data sent to a PgSTAC backend, and adds links to the returned data. All other processing and search is provided directly using PgSTAC procedural sql / plpgsql functions on the database. PgSTAC stores all collection and item records as jsonb fields exactly as they come in allowing for any custom fields to be stored and retrieved transparently.</p>"},{"location":"#pgstac-version","title":"<code>PgSTAC</code> version","text":"<p><code>stac-fastapi-pgstac</code> depends on <code>pgstac</code> database schema and <code>pypgstac</code> python package.</p> stac-fastapi-pgstac Version pgstac 2.5 &gt;=0.7,&lt;0.8 3.0 &gt;=0.8,&lt;0.9 &gt;=4.0 &gt;=0.8,&lt;0.10"},{"location":"#usage","title":"Usage","text":"<p>PgSTAC is an external project and may be used by multiple front ends. For Stac FastAPI development, a Docker image (which is pulled as part of the docker-compose) is available via the Github container registry. The PgSTAC version required by stac-fastapi-pgstac is found in the setup file.</p>"},{"location":"#sorting","title":"Sorting","text":"<p>While the STAC Sort Extension is fully supported, PgSTAC is particularly enhanced to be able to sort by datetime (either ascending or descending). Sorting by anything other than datetime (the default if no sort is specified) on very large STAC repositories without very specific query limits (ie selecting a single day date range) will not have the same performance. For more than millions of records it is recommended to either set a low connection timeout on PostgreSQL or to disable use of the Sort Extension.</p>"},{"location":"#hydration","title":"Hydration","text":"<p>To configure stac-fastapi-pgstac to hydrate search result items at the API level, set the <code>USE_API_HYDRATE</code> environment variable to <code>true</code>. If <code>false</code> (default) the hydration will be done in the database.</p> use_api_hydrate (API) nohydrate (PgSTAC) Hydration False False PgSTAC True True API"},{"location":"#migrations","title":"Migrations","text":"<p>There is a Python utility as part of PgSTAC (pypgstac) that includes a migration utility. To use:</p> <pre><code>pypgstac migrate\n</code></pre>"},{"location":"#development","title":"Development","text":"<p>Install the packages in editable mode:</p> <p>We recommand using <code>uv</code> as project manager for development.</p> <p>See docs.astral.sh/uv/getting-started/installation/ for installation </p> <pre><code>uv sync --dev\n</code></pre> <p>To run the tests:</p> <pre><code>uv run pytest\n</code></pre>"},{"location":"#contributing","title":"Contributing","text":"<p>See CONTRIBUTING for detailed contribution instructions.</p>"},{"location":"#releasing","title":"Releasing","text":"<p>See RELEASING.md.</p>"},{"location":"#history","title":"History","text":"<p>stac-fastapi-pgstac was initially added to stac-fastapi by developmentseed. In April of 2023, it was removed from the core stac-fastapi repository and moved to its current location (github.com/stac-utils/stac-fastapi-pgstac).</p>"},{"location":"#license","title":"License","text":"<p>MIT</p>"},{"location":"contributing/","title":"Contributing","text":"<p>Use Github Pull Requests to provide new features or to request review of draft code, and use Issues to report bugs or request new features.</p>"},{"location":"contributing/#development-install","title":"Development install","text":"<p>We recommand using <code>uv</code> as project manager for development.</p> <p>See docs.astral.sh/uv/getting-started/installation/ for installation </p> <p>dev install</p> <pre><code>git clone https://github.com/stac-utils/stac-fastapi-pgstac.git\ncd stac-fastapi\nuv sync\n</code></pre> <p>To run the service on 0.0.0.0:8082 and ingest example data into the database (the \"joplin\" collection):</p> <pre><code>make run-joplin\n</code></pre> <p>You can connect to the database with a database tool on port 5439 to inspect and see the data. </p> <p>To run the tests:</p> <pre><code>make test\n</code></pre> <p>pre-commit</p> <p>This repo is set to use <code>pre-commit</code> to run isort, flake8, pydocstring, black (\"uncompromising Python code formatter\") and mypy when committing new code.</p> <pre><code>pre-commit install\n</code></pre>"},{"location":"contributing/#docs","title":"Docs","text":"<pre><code>git clone https://github.com/stac-utils/stac-fastapi-pgstac.git\ncd stac-fastapi-pgstac\n# Build docs\nuv run --group docs mkdocs build -f docs/mkdocs.yml\n</code></pre> <p>Hot-reloading docs:</p> <pre><code>uv run --group docs mkdocs serve -f docs/mkdocs.yml --livereload\n</code></pre> <p>To manually deploy docs (note you should never need to do this because GitHub Actions deploys automatically for new commits.):</p> <pre><code># deploy\nuv run --group docs mkdocs gh-deploy -f docs/mkdocs.yml\n</code></pre>"},{"location":"release-notes/","title":"Changelog","text":""},{"location":"release-notes/#unreleased","title":"Unreleased","text":""},{"location":"release-notes/#622-2026-01-09","title":"[6.2.2] - 2026-01-09","text":""},{"location":"release-notes/#fixed","title":"Fixed","text":"<ul> <li>use <code>CORSMiddleware</code> from starlette instead of the one from stac-fastapi to avoid breaking changes</li> </ul>"},{"location":"release-notes/#621-2026-01-23","title":"6.2.1 - 2026-01-23","text":""},{"location":"release-notes/#fixed_1","title":"Fixed","text":"<ul> <li>Set default values for deprecated <code>postgres_*</code> settings to <code>None</code> (#343)</li> </ul>"},{"location":"release-notes/#620-2026-01-15","title":"6.2.0 - 2026-01-15","text":""},{"location":"release-notes/#fixed_2","title":"Fixed","text":"<ul> <li>update type hints for python 3.11</li> </ul>"},{"location":"release-notes/#removed","title":"Removed","text":"<ul> <li>support for python 3.9 and 3.10</li> </ul>"},{"location":"release-notes/#615-2025-12-12","title":"6.1.5 - 2025-12-12","text":""},{"location":"release-notes/#fixed_3","title":"Fixed","text":"<ul> <li>Update pydantic and pydantic-settings versions requirements</li> <li>Improve type hints</li> </ul>"},{"location":"release-notes/#614-2025-12-08","title":"6.1.4 - 2025-12-08","text":""},{"location":"release-notes/#fixed_4","title":"Fixed","text":"<ul> <li>remove uvicorn from dependencies</li> </ul>"},{"location":"release-notes/#613-2025-12-06","title":"6.1.3 - 2025-12-06","text":""},{"location":"release-notes/#fixed_5","title":"Fixed","text":"<ul> <li>avoid pydantic validation for <code>/collections</code> response when using <code>fields</code> extension (#326)</li> <li>Close readpool only if it exists (#331)</li> </ul>"},{"location":"release-notes/#612-2025-11-24","title":"6.1.2 - 2025-11-24","text":""},{"location":"release-notes/#changed","title":"Changed","text":"<ul> <li>remove pygstac dependency</li> <li>refactor tests fixtures to test multiple version of PgSTAC</li> </ul>"},{"location":"release-notes/#611-2025-11-20","title":"6.1.1 - 2025-11-20","text":""},{"location":"release-notes/#fixed_6","title":"Fixed","text":"<ul> <li>Parsing of <code>CORS_ORIGINS</code>, <code>CORS_HEADERS</code>, and <code>CORS_METHODS</code> from environment variables (#313)</li> </ul>"},{"location":"release-notes/#changed_1","title":"Changed","text":"<ul> <li>Docker container runs as non-root user</li> </ul>"},{"location":"release-notes/#610-2025-11-03","title":"6.1.0 - 2025-11-03","text":""},{"location":"release-notes/#changed_2","title":"Changed","text":"<ul> <li>update <code>pypgstac</code> version requirement to <code>&gt;=0.9,&lt;0.10</code></li> <li>switch to pyproject.toml for package metadata</li> <li>use <code>uv</code> for project managment</li> <li>add python 3.14 support</li> </ul>"},{"location":"release-notes/#added","title":"Added","text":"<ul> <li>lower bounds for <code>hydraters</code> requirements</li> <li><code>EXCLUDE_HYDRATE_MARKERS=TRUE/FALSE</code> (defaults to <code>TRUE</code>) to exclude <code>\ud808\udf5f\u203b</code> markers returned by PgSTAC</li> <li>python <code>3.13</code> and <code>3.14</code> support</li> </ul>"},{"location":"release-notes/#removed_1","title":"removed","text":"<ul> <li>aws lambda handler in <code>app.py</code></li> </ul>"},{"location":"release-notes/#602-2025-10-03","title":"6.0.2 - 2025-10-03","text":"<ul> <li>add <code>CORS_ORIGIN_REGEX</code> settings (#298)</li> </ul>"},{"location":"release-notes/#601-2025-09-30","title":"6.0.1 - 2025-09-30","text":"<ul> <li>fix: ignore 'rel:items' entries when generating links (#294)</li> </ul>"},{"location":"release-notes/#600-2025-08-08","title":"6.0.0 - 2025-08-08","text":""},{"location":"release-notes/#fixed_7","title":"Fixed","text":"<ul> <li>fix root-path handling when setting via env var or on app instance</li> <li>Allow <code>q</code> parameter to be a <code>str</code> not a <code>list[str]</code> for Advanced Free-Text extension</li> <li>do not <code>unquote</code> parameters for next/prev links</li> </ul>"},{"location":"release-notes/#changed_3","title":"Changed","text":"<ul> <li>rename <code>POSTGRES_HOST_READER</code> to <code>PGHOST</code> in config breaking change</li> <li>rename <code>POSTGRES_USER</code> to <code>PGUSER</code> in config breaking change</li> <li>rename <code>POSTGRES_PASS</code> to <code>PGPASSWORD</code> in config breaking change</li> <li>rename <code>POSTGRES_PORT</code> to <code>PGPORT</code> in config breaking change</li> <li>rename <code>POSTGRES_DBNAME</code> to <code>PGDATABASE</code> in config breaking change</li> </ul> <pre><code>from stac_fastapi.pgstac.config import PostgresSettings\n\n# before\nsettings = PostgresSettings(\n    postgres_user=\"user\",\n    postgres_pass=\"password\",\n    postgres_host_reader=\"0.0.0.0\",\n    postgres_host_writer=\"0.0.0.0\",\n    postgres_port=1111,\n    postgres_dbname=\"pgstac\",\n)\n\n# now\nsettings = PostgresSettings(\n    pguser=\"user\",\n    pgpassword=\"password\",\n    pghost=\"0.0.0.0\",\n    pgport=1111,\n    pgdatabase=\"pgstac\",\n)\n</code></pre> <ul> <li>rename <code>reader_connection_string</code> to <code>connection_string</code> in <code>PostgresSettings</code> class breaking change</li> <li>add <code>ENABLE_TRANSACTIONS_EXTENSIONS</code> env variable to enable <code>transaction</code> extensions</li> <li>disable transaction and bulk_transactions extensions by default breaking change</li> <li>update <code>stac-fastapi-*</code> version requirements to <code>&gt;=5.2,&lt;6.0</code></li> <li>add pgstac health-check in <code>/_mgmt/health</code></li> <li>switch from using <code>pygeofilter</code> to <code>cql2</code></li> <li>publish arm64 Docker images</li> </ul>"},{"location":"release-notes/#added_1","title":"Added","text":"<ul> <li>add <code>validate_extensions</code> setting that enables validation of <code>stac_extensions</code> from submitted STAC objects   using the <code>stac_pydantic.extensions.validate_extensions</code> utility. Applicable only when <code>TransactionExtension</code>   is active.</li> <li>add <code>validation</code> extra requirement to install dependencies of <code>stac_pydantic</code> required for extension validation</li> <li>add <code>write_connection_pool</code> option in <code>stac_fastapi.pgstac.db.connect_to_db</code> function</li> <li>add <code>write_postgres_settings</code> option in <code>stac_fastapi.pgstac.db.connect_to_db</code> function to set specific settings for the <code>writer</code> DB connection pool</li> <li>add specific error message when trying to create <code>Item</code> with null geometry (not supported by PgSTAC)</li> <li>add support for Patch in transactions extension</li> <li>CORS authentication setting</li> </ul>"},{"location":"release-notes/#removed_2","title":"removed","text":"<ul> <li><code>stac_fastapi.pgstac.db.DB</code> class</li> <li><code>POSTGRES_HOST_WRITER</code> in config</li> <li><code>writer_connection_string</code> in <code>PostgresSettings</code> class</li> <li><code>testing_connection_string</code> in <code>PostgresSettings</code> class</li> </ul>"},{"location":"release-notes/#503-2025-07-23","title":"5.0.3 - 2025-07-23","text":""},{"location":"release-notes/#fixed_8","title":"Fixed","text":"<ul> <li>fix root-path handling when setting via env var or on app instance (#270)</li> </ul>"},{"location":"release-notes/#502-2025-04-07","title":"5.0.2 - 2025-04-07","text":""},{"location":"release-notes/#fixed_9","title":"Fixed","text":"<ul> <li>fix root-path handling when setting in uvicorn command</li> <li>reduce <code>db_min_conn_size</code> to <code>1</code> to avoid creating too many db connections when starting the application</li> </ul>"},{"location":"release-notes/#501-2025-03-27","title":"5.0.1 - 2025-03-27","text":""},{"location":"release-notes/#fixed_10","title":"Fixed","text":"<ul> <li>fix media type for <code>self</code> links in <code>/search</code> responses</li> </ul>"},{"location":"release-notes/#500-2025-03-10","title":"5.0.0 - 2025-03-10","text":""},{"location":"release-notes/#changed_4","title":"Changed","text":"<ul> <li>move Postgres settings into separate <code>PostgresSettings</code> class and defer loading until connecting to database (#209)</li> <li>update <code>stac-fastapi-*</code> version requirements to <code>&gt;=5.1,&lt;6.0</code></li> </ul>"},{"location":"release-notes/#403-2025-03-10","title":"4.0.3 - 2025-03-10","text":""},{"location":"release-notes/#fixed_11","title":"Fixed","text":"<ul> <li>fix links when app is mounted behind proxy or has router-prefix (#195)</li> </ul>"},{"location":"release-notes/#402-2025-02-18","title":"4.0.2 - 2025-02-18","text":""},{"location":"release-notes/#fixed_12","title":"Fixed","text":"<ul> <li>use Relation's <code>value</code> for <code>POST</code> prev/next links</li> <li>return <code>JSONResponse</code> directly from <code>/items</code> endpoint when <code>fields</code> parameter is pass and avoid Pydantic validation</li> </ul>"},{"location":"release-notes/#changed_5","title":"Changed","text":"<ul> <li>avoid re-use of internal <code>CoreCrudClient.post_search</code> in <code>CoreCrudClient.get_search</code> method to allow customization</li> </ul>"},{"location":"release-notes/#401-2025-02-06","title":"4.0.1 - 2025-02-06","text":""},{"location":"release-notes/#added_2","title":"Added","text":"<ul> <li>add <code>numberReturned</code> and <code>numberMatched</code> in <code>/collections</code> response</li> </ul>"},{"location":"release-notes/#400-2025-02-03","title":"4.0.0 - 2025-02-03","text":""},{"location":"release-notes/#changed_6","title":"Changed","text":"<ul> <li>remove <code>python 3.8</code> support</li> <li>update <code>stac-fastapi-*</code> requirement to <code>~=5.0</code></li> <li>keep <code>/search</code> and <code>/collections</code> extensions separate (#158)</li> <li>update <code>pypgstac</code> requirement to <code>&gt;=0.8,&lt;0.10</code></li> <li>set <code>pypgstac==0.9.*</code> for test requirements</li> <li>renamed <code>post_request_model</code> attribute to <code>pgstac_search_model</code> in <code>CoreCrudClient</code> class</li> <li>changed <code>datetime</code> input type to <code>string</code> in GET endpoint methods</li> <li>renamed <code>filter</code> to <code>filter_expr</code> input attributes in GET endpoint methods</li> <li>delete <code>utils.format_datetime_range</code> function</li> </ul>"},{"location":"release-notes/#fixed_13","title":"Fixed","text":"<ul> <li>handle <code>next</code> and <code>prev</code> tokens now returned as links from pgstac&gt;=0.9.0 (author @zstatmanweil, stac-utils/stac-fastapi-pgstac!140)</li> <li>fix Docker compose file, so example data can be loaded into database (author @zstatmanweil, stac-utils/stac-fastapi-pgstac!142)</li> <li>fix <code>filter</code> extension implementation in <code>CoreCrudClient</code></li> </ul>"},{"location":"release-notes/#added_3","title":"Added","text":"<ul> <li>add collection search extension support (#139)</li> <li>add free-text extension to collection search extensions (#162)</li> <li>add filter extension support to Item Collection endpoint</li> <li>add sort extension support to Item Collection endpoint (#192)</li> <li>add query extension support to Item Collection endpoint (#162)</li> <li>add fields extension support to Item Collection endpoint (#162)</li> </ul>"},{"location":"release-notes/#301-2024-11-14","title":"3.0.1 - 2024-11-14","text":"<ul> <li>Enable runtime <code>CORS</code> configuration using environment variables (<code>CORS_ORIGINS=\"https://...,https://...\"</code>, <code>CORS_METHODS=\"PUT,OPTIONS\"</code>) (stac-utils/stac-fastapi-pgstac!168)</li> </ul>"},{"location":"release-notes/#300-2024-08-02","title":"3.0.0 - 2024-08-02","text":"<ul> <li>Enable filter extension for <code>GET /items</code> requests and add <code>Queryables</code> links in <code>/collections</code> and <code>/collections/{collection_id}</code> responses (#89)</li> <li>Allow to omit <code>collection</code> in bulk item insertions. Same identifier checks as with single insertions (#113)</li> <li>Set <code>stac-fastapi-*</code> requirements to ~=3.0</li> </ul>"},{"location":"release-notes/#300a4-2024-07-10","title":"3.0.0a4 - 2024-07-10","text":"<ul> <li>Update stac-fastapi libraries to <code>~=3.0.0b2</code></li> </ul>"},{"location":"release-notes/#300a3-2024-07-01","title":"3.0.0a3 - 2024-07-01","text":"<ul> <li>Use <code>quote_plus</code> instead of <code>quote</code> to encode database's password (#122)</li> <li>Update stac-fastapi libraries to <code>~=3.0.0a4</code></li> </ul>"},{"location":"release-notes/#300a2-2024-06-18","title":"3.0.0a2 - 2024-06-18","text":"<ul> <li>Update stac-fastapi libraries to <code>~=3.0.0a3</code></li> <li>make sure the application can work without any extension</li> </ul>"},{"location":"release-notes/#300a1-2024-05-22","title":"3.0.0a1 - 2024-05-22","text":"<ul> <li>Update stac-fastapi libraries to <code>~=3.0.0a1</code></li> <li>Update stac-pydantic dependency to <code>==3.1.*</code></li> </ul>"},{"location":"release-notes/#300a0-2024-05-10","title":"3.0.0a0 - 2024-05-10","text":""},{"location":"release-notes/#changed_7","title":"Changed","text":"<ul> <li>Update stac-fastapi libraries to v3.0.0a0 (#108)</li> <li>Update pgstac version to <code>0.8.x</code></li> </ul>"},{"location":"release-notes/#250-2024-04-25","title":"2.5.0 - 2024-04-25","text":""},{"location":"release-notes/#changed_8","title":"Changed","text":"<ul> <li>Updated stac-fastapi libraries to v2.5.5 (#101)</li> </ul>"},{"location":"release-notes/#added_4","title":"Added","text":"<ul> <li>Ability to configure the database runtime parameters (#92)</li> </ul>"},{"location":"release-notes/#2411-2023-12-01","title":"2.4.11 - 2023-12-01","text":""},{"location":"release-notes/#changed_9","title":"Changed","text":"<ul> <li>Add <code>method</code> parameter to Bulk Transactions requests in order to support upserting bulk data (#64)</li> </ul>"},{"location":"release-notes/#2410-2023-08-18","title":"2.4.10 - 2023-08-18","text":""},{"location":"release-notes/#fixed_14","title":"Fixed","text":"<ul> <li>Added back the <code>CMD</code> to the Dockerfile that was dropped during the repo split (#52)</li> </ul>"},{"location":"release-notes/#249-2023-06-21","title":"2.4.9 - 2023-06-21","text":""},{"location":"release-notes/#fixed_15","title":"Fixed","text":"<ul> <li>Pass <code>request</code> by name when calling endpoints from other endpoints (#44)</li> </ul>"},{"location":"release-notes/#248-2023-06-08","title":"2.4.8 - 2023-06-08","text":""},{"location":"release-notes/#changed_10","title":"Changed","text":"<ul> <li>Updated stac-fastapi to v2.4.8, which updates our STAC API version to v1.0.0 (#40)</li> </ul>"},{"location":"release-notes/#247-2023-05-17","title":"2.4.7 - 2023-05-17","text":""},{"location":"release-notes/#added_5","title":"Added","text":"<ul> <li>Support for <code>ItemCollections</code> in the transaction extension (#35)</li> </ul>"},{"location":"release-notes/#246-2023-05-11","title":"2.4.6 - 2023-05-11","text":"<p>As a part of this release, this repository was extracted from the main stac-fastapi repository.</p>"},{"location":"release-notes/#added_6","title":"Added","text":"<ul> <li>Ability to customize the database connection (#22)</li> <li>Ability to add ItemCollections through the Transaction API, with more validation (#35)</li> </ul>"},{"location":"release-notes/#changed_11","title":"Changed","text":"<ul> <li>Quieter tests (#22)</li> </ul>"},{"location":"release-notes/#245-2023-04-04","title":"2.4.5 - 2023-04-04","text":""},{"location":"release-notes/#fixed_16","title":"Fixed","text":"<ul> <li>Use <code>V()</code> instead of f-strings for pgstac queries (#554)</li> </ul>"},{"location":"release-notes/#244-2023-03-09","title":"2.4.4 - 2023-03-09","text":""},{"location":"release-notes/#added_7","title":"Added","text":"<ul> <li>Nginx service as second docker-compose stack to demonstrate proxy (#503)</li> <li>Validation checks in CI using stac-api-validator (#508)</li> <li>Required links to the sqlalchemy ItemCollection endpoint (#508)</li> <li>Publication of docker images to GHCR (#525)</li> </ul>"},{"location":"release-notes/#changed_12","title":"Changed","text":"<ul> <li>Updated CI to test against pgstac v0.6.12 (#511)</li> <li>Reworked <code>update_openapi</code> and added a test for it (#523)</li> <li>Limit values above 10,000 are now replaced with 10,000 instead of returning a 400 error (#526)</li> <li>Updated pgstac to v0.7.1 (#535)</li> </ul>"},{"location":"release-notes/#removed_3","title":"Removed","text":"<ul> <li>Incorrect context STAC extension url from the landing page (#508)</li> </ul>"},{"location":"release-notes/#fixed_17","title":"Fixed","text":"<ul> <li>Allow url encoded values for <code>query</code> in GET requests (#504)</li> <li>Fix path in <code>register_update_item</code> docstring (#507)</li> <li><code>self</code> link rel for <code>/collections/{c_id}/items</code> (#508)</li> <li>Media type of the item collection endpoint (#508)</li> <li>Manually exclude non-truthy optional values from sqlalchemy serialization of Collections (#508)</li> <li>Support <code>intersects</code> in GET requests (#521)</li> <li>Deleting items that had repeated ids in other collections (#520)</li> <li>404 for missing collection on /items for sqlalchemy (#528)</li> <li>Conformance URIs for the filter extension (#540)</li> </ul>"},{"location":"release-notes/#deprecated","title":"Deprecated","text":"<ul> <li>Deprecated <code>VndOaiResponse</code> and <code>config_openapi</code>, will be removed in v3.0 (#523)</li> </ul>"},{"location":"release-notes/#243-2022-11-25","title":"2.4.3 - 2022-11-25","text":""},{"location":"release-notes/#added_8","title":"Added","text":"<ul> <li>Add the <code>ENABLED_EXTENSIONS</code> environment variable determining which extensions are enabled in the pgstac application, all extensions are enabled by default (#495)</li> </ul>"},{"location":"release-notes/#changed_13","title":"Changed","text":""},{"location":"release-notes/#removed_4","title":"Removed","text":""},{"location":"release-notes/#fixed_18","title":"Fixed","text":""},{"location":"release-notes/#242-2022-11-25","title":"2.4.2 - 2022-11-25","text":""},{"location":"release-notes/#added_9","title":"Added","text":"<ul> <li>Add support in pgstac backend for /queryables and /collections/{collection_id}/queryables endpoints with functions exposed in pgstac 0.6.8 (#474)</li> <li>Add <code>bbox</code> and <code>datetime</code> query parameters to <code>/collections/{collection_id}/items</code>. (#476, #380)</li> <li>Update pgstac requirement to 0.6.10</li> <li>Add <code>servers</code> and <code>description</code> to OpenAPI (#459)</li> </ul>"},{"location":"release-notes/#changed_14","title":"Changed","text":""},{"location":"release-notes/#removed_5","title":"Removed","text":"<ul> <li>Removed <code>stac_fastapi.api.routes.create_sync_endpoint</code> function to reduce code duplication (#471)</li> </ul>"},{"location":"release-notes/#fixed_19","title":"Fixed","text":"<ul> <li>Quote password in pgsql strings to accomodate special characters. (#455)</li> <li>Fix pgstac backend for /queryables endpoint to return 404 for non-existent collections (#482)</li> <li><code>/collection/{collection_id}/items</code> endpoints now return geojson media type (#488)</li> </ul>"},{"location":"release-notes/#241-2022-08-05","title":"2.4.1 - 2022-08-05","text":""},{"location":"release-notes/#added_10","title":"Added","text":""},{"location":"release-notes/#changed_15","title":"Changed","text":""},{"location":"release-notes/#removed_6","title":"Removed","text":""},{"location":"release-notes/#fixed_20","title":"Fixed","text":"<ul> <li><code>ciso8601</code> fails to build in some environments, instead use <code>pyiso8601</code> to parse datetimes.</li> </ul>"},{"location":"release-notes/#240-2022-08-04","title":"2.4.0 - 2022-08-04","text":""},{"location":"release-notes/#added_11","title":"Added","text":"<ul> <li>Add hook to allow adding dependencies to routes. (#295)</li> <li>Ability to POST an ItemCollection to the collections/{collectionId}/items route. (#367)</li> <li>Add STAC API - Collections conformance class. (383)</li> <li>Bulk item inserts for pgstac implementation. (411)</li> <li>Add APIRouter prefix support for pgstac implementation. (429)</li> <li>Respect <code>Forwarded</code> or <code>X-Forwarded-*</code> request headers when building links to better accommodate load balancers and proxies.</li> </ul>"},{"location":"release-notes/#changed_16","title":"Changed","text":"<ul> <li>Update FastAPI requirement to allow version &gt;=0.73 (#337)</li> <li>Bump version of PGStac to 0.4.5  (#346)</li> <li>Add support for PGStac Backend to use PyGeofilter to convert Get Request with cql2-text into cql2-json to send to PGStac backend (#346)</li> <li>Updated all conformance classes to 1.0.0-rc.1. (383)</li> <li>Bulk Transactions object Items iterator now returns the Item objects rather than the string IDs of the Item objects   (#355)</li> <li>docker-compose now runs uvicorn with hot-reloading enabled</li> <li>Bump version of PGStac to 0.6.2 that includes support for hydrating results in the API backed (#397)</li> <li>Make item geometry and bbox nullable in sqlalchemy backend. (#398)</li> <li>Transactions Extension update Item endpoint Item is now <code>/collections/{collection_id}/items/{item_id}</code> instead of   <code>/collections/{collection_id}/items</code> to align with STAC API   spec (#425)</li> </ul>"},{"location":"release-notes/#removed_7","title":"Removed","text":"<ul> <li>Remove the unused <code>router_middleware</code> function (#439)</li> </ul>"},{"location":"release-notes/#fixed_21","title":"Fixed","text":"<ul> <li>Bumped uvicorn version to 0.17 (from &gt;=0.12, &lt;=0.14) to resolve security vulnerability related to websockets dependency version (#343)</li> <li><code>AttributeError</code> and/or missing properties when requesting the complete <code>properties</code>-field in searches. Added test. (#339)</li> <li>Fixes issues (and adds tests) for issues caused by regression in pgstac (#345</li> <li>Update error response payloads to match the API spec. (#361)</li> <li>Fixed stray <code>/</code> before the <code>#</code> in several extension conformance class strings (383)</li> <li>SQLAlchemy backend bulk item insert now works (#356)</li> <li>PGStac Backend has stricter implementation of Fields Extension syntax (#397)</li> <li><code>/queryables</code> endpoint now has type <code>application/schema+json</code> instead of <code>application/json</code> (#421)</li> <li>Transactions Extension update Item endpoint validates that the <code>{collection_id}</code> path parameter matches the Item <code>\"collection\"</code> property   from the request body, if present, and falls back to using the path parameter if no <code>\"collection\"</code> property is found in the body   (#425)</li> <li>PGStac Backend Transactions endpoints return added Item/Collection instead of Item/Collection from request (#424)</li> <li>Application no longer breaks on startup when pagination extension is not included (#444)</li> </ul>"},{"location":"release-notes/#230-2022-01-18","title":"2.3.0 - 2022-01-18","text":""},{"location":"release-notes/#added_12","title":"Added","text":"<ul> <li>Add link with rel-type of 'service-doc', pointing to HTML API documentation (#298)</li> </ul>"},{"location":"release-notes/#changed_17","title":"Changed","text":"<ul> <li>Refactor to remove hardcoded search request models. Request models are now dynamically created based on the enabled extensions.   (#213)</li> <li>Change example data to use correct <code>type</code> for the example Joplin collection (#314)</li> <li>Changed the geometry type in the Item model from Polygon to Geometry.</li> <li>Upgrade pgstac backend to use version 0.4.2 (#321)</li> <li>STAC 1.0.0-beta.4 conformance classes updated (#298)</li> <li>Upgrade pgstac backend to use version 0.4.3 (#326)</li> </ul>"},{"location":"release-notes/#removed_8","title":"Removed","text":"<ul> <li>The tiles extension and all tiles links, added for demonstration purposes, have been removed. (#309)</li> </ul>"},{"location":"release-notes/#fixed_22","title":"Fixed","text":"<ul> <li>Import error using <code>importlib.util</code> (#325)</li> <li>Add environment variables required by upgraded pgstac container (#313)</li> <li>Enabled <code>ContextExtension</code> by default (#207)</li> <li>Content-type response headers for the /search endpoint now reflect the geojson response expected in the STAC api spec (#220)</li> <li>The minimum <code>limit</code> value for searches is now 1 (#296)</li> <li>Links stored with Collections and Items (e.g. license links) are now returned with those STAC objects (#282)</li> <li>Content-type response headers for the /api endpoint now reflect those expected in the STAC api spec (#287)</li> <li>Changed type options for datetime in BaseSearchGetRequest (#318)</li> <li>Expanded on tests to ensure properly testing get and post searches (#318)</li> <li>Ensure invalid datetimes result in 400s (#323)</li> </ul>"},{"location":"release-notes/#220-2021-10-19","title":"2.2.0 - 2021-10-19","text":""},{"location":"release-notes/#added_13","title":"Added","text":"<ul> <li>Add CQL2 support (#308)</li> <li>Add ability to override ItemCollectionUri and SearchGetRequest models (#271)</li> <li>Added <code>collections</code> attribute to list of default fields to include, so that we satisfy the STAC API spec, which requires a <code>collections</code> attribute to be output when an item is part of a collection (#276)</li> </ul>"},{"location":"release-notes/#changed_18","title":"Changed","text":"<ul> <li>Update pgstac to 0.4.0 (#308)</li> <li>Update get_item in sqlalchemy backend to allow for querying for items with same ids but in different collections. (#275)</li> </ul>"},{"location":"release-notes/#211-2021-09-23","title":"2.1.1 - 2021-09-23","text":""},{"location":"release-notes/#added_14","title":"Added","text":"<ul> <li>Add <code>middlewares</code> option in <code>stac_fastapi.api.StacApi</code> to allow custom middleware configuration (#267)</li> <li>Support non-interval datetime queries on sqlalchemy backend (#262)</li> <li>Restrict <code>limit</code> parameter in sqlalchemy backend to between 1 and 10,000. (#251)</li> <li>Fix OAS conformance URL (#263)</li> <li>Links to children collections from the landing pagge always have a title (#260)</li> <li>Fix collection links in the <code>all_collections</code> method in <code>pgstac</code> (#269)</li> </ul>"},{"location":"release-notes/#fixed_23","title":"Fixed","text":"<ul> <li>Pin FastAPI to 0.67 to avoid issues with rendering OpenAPI documentation (#246)</li> <li>Add <code>stac_version</code> to default search attributes (#268)</li> <li>pgstac backend specifies collection_id when fetching a single item (#279)</li> </ul>"},{"location":"release-notes/#210-2021-08-26","title":"2.1.0 - 2021-08-26","text":""},{"location":"release-notes/#added_15","title":"Added","text":"<ul> <li>Added filter extension. (#165)</li> <li>Add Support for CQL JSON to PGStac Backend (#209)</li> <li>Added item_serializer and item_table to BulkTransactionsClient in sqlalchemy backend (#210)</li> <li>Enable conformance class configuration (#214)</li> <li>Add/fix landing page links (#229)</li> <li>Correct response codes for bad/unusable bboxes (#235)</li> <li>Add a \"method\" field for search links (#236)</li> <li>Add extension schemas to landing (#237)</li> </ul>"},{"location":"release-notes/#removed_9","title":"Removed","text":"<ul> <li>Remove shapely from stac_fastapi.pgstac requirements (#225)</li> </ul>"},{"location":"release-notes/#changed_19","title":"Changed","text":"<ul> <li>Update to STAC API 1.0.0-beta.3 (#239)</li> </ul>"},{"location":"release-notes/#fixed_24","title":"Fixed","text":"<ul> <li>Make collection title optional in landing page links (#198)</li> <li>Preserve relative paths on link generation (#199)</li> <li>Fix collection endpoint return value to match spec (fixes regression) (#232)</li> <li>Return empty item collection instead of error when searching (#233)</li> <li>Correct response codes for bad/unusable bboxes (#235)</li> <li>Update pgstac to return 400 on invalid date parameter (#240)</li> </ul>"},{"location":"release-notes/#200-2021-07-26","title":"2.0.0 - 2021-07-26","text":"<ul> <li>Refactor stac-fastapi into submodules (#106stac-utils/stac-fastapi/pull/106)</li> <li>Add pgstac backend (#126)</li> <li>Upgrade to stac-pydantic 2.0.0 and stac-spec 1.0.0 (#181)</li> </ul>"},{"location":"release-notes/#110-2021-01-28","title":"1.1.0 - 2021-01-28","text":"<ul> <li>Improve how the library declares API extensions (#54)</li> <li>Add postgres bulk transactions client (#59)</li> <li>Update TiTiler version (#61)</li> <li>Use attrs instead of dataclasses (#73)</li> <li>Remove postgres database connection from API layer (#74)</li> <li>Fix <code>pre-commit</code> config (#75)</li> </ul>"},{"location":"release-notes/#100-2020-09-28","title":"1.0.0 - 2020-09-28","text":"<ul> <li>First PyPi release!</li> </ul>"},{"location":"releasing/","title":"Releasing","text":"<p>This is a checklist for releasing a new version of stac-fastapi.</p> <ol> <li>Determine the next version.    We currently do not have published versioning guidelines, but there is some text on the subject here: radiantearth/stac-spec?1184.</li> <li>Create a release branch named <code>release/vX.Y.Z</code>, where <code>X.Y.Z</code> is the new version.</li> <li>Search and replace all instances of the current version number with the new version.</li> </ol> <p>Note: You can use <code>bump-my-version</code> CLI    <pre><code>uv run --with bump-my-version bump-my-version bump --new-version 3.1.0\n</code></pre></p> <ol> <li>Update CHANGES.md for the new version.    Add the appropriate header, and update the links at the bottom of the file.</li> <li>Audit CHANGES.md for completeness and accuracy.    Also, ensure that the changes in this version are appropriate for the version number change (i.e. if you're making breaking changes, you should be increasing the <code>MAJOR</code> version number).</li> <li>(optional) If you have permissions, run <code>scripts/publish --test</code> to test your PyPI publish.    If successful, the published packages will be available on test.pypy.org.</li> <li>Push your release branch, create a PR, and get approval.</li> <li>Once the PR is merged, create a new (annotated, signed) tag on the appropriate commit.    Name the tag <code>X.Y.Z</code>, and include <code>vX.Y.Z</code> as its annotation message.</li> <li>Push your tag to Github, which will kick off the publishing workflow.</li> <li>Create a new release targeting the new tag, and use the \"Generate release notes\" feature to populate the description.     Publish the release and mark it as the latest.</li> <li>Publicize the release via the appropriate social channels, including Gitter.</li> </ol>"},{"location":"settings/","title":"Configuration","text":""},{"location":"settings/#application-extension","title":"Application Extension","text":"<p>The default <code>stac-fastapi-pgstac</code> application comes will all extensions enabled (except transaction). Users can use <code>ENABLED_EXTENSIONS</code> environment variable to limit the supported extensions.</p> <p>Available values for <code>ENABLED_EXTENSIONS</code>:</p> <ul> <li><code>query</code></li> <li><code>sort</code></li> <li><code>fields</code></li> <li><code>filter</code></li> <li><code>free_text</code> (only for collection-search)</li> <li><code>pagination</code></li> <li><code>collection_search</code></li> </ul> <p>Example: <code>ENABLED_EXTENSIONS=\"pagination,sort\"</code></p> <p>Since <code>6.0.0</code>, the transaction extension is not enabled by default. To add the transaction endpoints, users can set <code>ENABLE_TRANSACTIONS_EXTENSIONS=TRUE/YES/1</code>.</p>"},{"location":"settings/#database-config","title":"Database config","text":"<ul> <li><code>PGUSER</code>: postgres username</li> <li><code>PGPASSWORD</code>: postgres password</li> <li><code>PGHOST</code>: hostname for the connection</li> <li><code>PGPORT</code>: database port</li> <li><code>PGDATABASE</code>: database name</li> <li><code>DB_MIN_CONN_SIZE</code>: Number of connection the pool will be initialized with. Defaults to <code>1</code></li> <li><code>DB_MAX_CONN_SIZE</code> Max number of connections in the pool. Defaults to <code>10</code></li> <li><code>DB_MAX_QUERIES</code>: Number of queries after a connection is closed and replaced with a new connection. Defaults to <code>50000</code></li> <li><code>DB_MAX_INACTIVE_CONN_LIFETIME</code>: Number of seconds after which inactive connections in the pool will be closed. Defaults to <code>300</code></li> <li><code>SEARCH_PATH</code>: Postgres search path. Defaults to <code>\"pgstac,public\"</code></li> <li><code>APPLICATION_NAME</code>: PgSTAC Application name. Defaults to <code>\"pgstac\"</code></li> </ul>"},{"location":"settings/#deprecated","title":"Deprecated","text":"<p>In version <code>6.0.0</code> we've renamed the PG configuration variable to match the official naming convention:</p> <ul> <li><code>POSTGRES_USER</code> -&gt; <code>PGUSER</code></li> <li><code>POSTGRES_PASS</code> -&gt; <code>PGPASSWORD</code></li> <li><code>POSTGRES_HOST_READER</code> -&gt; <code>PGHOST</code></li> <li><code>POSTGRES_HOST_WRITER</code> -&gt; <code>PGHOST</code>*</li> <li><code>POSTGRES_PORT</code> -&gt; <code>PGPORT</code></li> <li><code>POSTGRES_DBNAME</code> -&gt; <code>PGDATABASE</code></li> </ul> <p>* Since version <code>6.0</code>, users cannot set a different host for <code>writer</code> and <code>reader</code> database but will need to customize the application and pass a specific <code>stac_fastapi.pgstac.config.PostgresSettings</code> instance to the <code>connect_to_db</code> function.</p>"},{"location":"settings/#validationserialization","title":"Validation/Serialization","text":"<ul> <li><code>ENABLE_RESPONSE_MODELS</code>: use pydantic models to validate endpoint responses. Defaults to <code>False</code></li> <li><code>ENABLE_DIRECT_RESPONSE</code>: by-pass the default FastAPI serialization by wrapping the endpoint responses into <code>starlette.Response</code> classes. Defaults to <code>False</code></li> </ul>"},{"location":"settings/#misc","title":"Misc","text":"<ul> <li><code>STAC_FASTAPI_VERSION</code> (string) is the version number of your API instance (this is not the STAC version)</li> <li><code>STAC FASTAPI_TITLE</code> (string) should be a self-explanatory title for your API</li> <li><code>STAC FASTAPI_DESCRIPTION</code> (string) should be a good description for your API. It can contain CommonMark</li> <li><code>STAC_FASTAPI_LANDING_ID</code> (string) is a unique identifier for your Landing page</li> <li><code>ROOT_PATH</code>: set application root-path (when using proxy)</li> <li><code>CORS_ORIGINS</code>: A list of origins that should be permitted to make cross-origin requests. Defaults to <code>*</code></li> <li><code>CORS_ORIGIN_REGEX</code>: A regex string to match against origins that should be permitted to make cross-origin requests. eg. 'https://.*.example.org'.</li> <li><code>CORS_METHODS</code>: A list of HTTP methods that should be allowed for cross-origin requests. Defaults to <code>\"GET,POST,OPTIONS\"</code></li> <li><code>CORS_CREDENTIALS</code>: Set to <code>true</code> to enable credentials via CORS requests. Note that you'll need to set <code>CORS_ORIGINS</code> to something other than <code>*</code>, because credentials are disallowed for wildcard CORS origins.</li> <li><code>CORS_HEADERS</code>: If <code>CORS_CREDENTIALS</code> are true and you're using an <code>Authorization</code> header, set this to <code>Content-Type,Authorization</code>. Alternatively, you can allow all headers by setting this to <code>*</code>.</li> <li><code>USE_API_HYDRATE</code>: perform hydration of stac items within stac-fastapi</li> <li><code>INVALID_ID_CHARS</code>: list of characters that are not allowed in item or collection ids (used in Transaction endpoints)</li> <li><code>PREFIX_PATH</code>: An optional path prefix for the underlying FastAPI router.</li> </ul>"},{"location":"api/stac_fastapi/pgstac/","title":"Module stac_fastapi.pgstac","text":"<p>stac_fastapi.pgstac module.</p>"},{"location":"api/stac_fastapi/pgstac/#sub-modules","title":"Sub-modules","text":"<ul> <li>stac_fastapi.pgstac.app</li> <li>stac_fastapi.pgstac.config</li> <li>stac_fastapi.pgstac.core</li> <li>stac_fastapi.pgstac.db</li> <li>stac_fastapi.pgstac.extensions</li> <li>stac_fastapi.pgstac.models</li> <li>stac_fastapi.pgstac.transactions</li> <li>stac_fastapi.pgstac.utils</li> </ul>"},{"location":"api/stac_fastapi/pgstac/app/","title":"app","text":""},{"location":"api/stac_fastapi/pgstac/app/#stac_fastapi.pgstac.app","title":"stac_fastapi.pgstac.app","text":"<p>FastAPI application using PGStac.</p> <p>Enables the extensions specified as a comma-delimited list in the ENABLED_EXTENSIONS environment variable (e.g. <code>transactions,sort,query</code>). If the variable is not set, enables all extensions.</p>"},{"location":"api/stac_fastapi/pgstac/app/#stac_fastapi.pgstac.app.lifespan","title":"lifespan  <code>async</code>","text":"<pre><code>lifespan(app: FastAPI)\n</code></pre> <p>FastAPI Lifespan.</p>"},{"location":"api/stac_fastapi/pgstac/app/#stac_fastapi.pgstac.app.run","title":"run","text":"<pre><code>run()\n</code></pre> <p>Run app from command line using uvicorn if available.</p>"},{"location":"api/stac_fastapi/pgstac/config/","title":"config","text":""},{"location":"api/stac_fastapi/pgstac/config/#stac_fastapi.pgstac.config","title":"stac_fastapi.pgstac.config","text":"<p>Postgres API configuration.</p>"},{"location":"api/stac_fastapi/pgstac/config/#stac_fastapi.pgstac.config.PostgresSettings","title":"PostgresSettings","text":"<p>               Bases: <code>BaseSettings</code></p> <p>Postgres-specific API settings.</p> <p>Attributes:</p> <ul> <li> <code>pguser</code>               (<code>str</code>)           \u2013            <p>postgres username.</p> </li> <li> <code>pgpassword</code>               (<code>str</code>)           \u2013            <p>postgres password.</p> </li> <li> <code>pghost</code>               (<code>str</code>)           \u2013            <p>hostname for the connection.</p> </li> <li> <code>pgport</code>               (<code>int</code>)           \u2013            <p>database port.</p> </li> <li> <code>pgdatabase</code>               (<code>str</code>)           \u2013            <p>database name.</p> </li> </ul> Source code in <code>stac_fastapi/pgstac/config.py</code> <pre><code>class PostgresSettings(BaseSettings):\n    \"\"\"Postgres-specific API settings.\n\n    Attributes:\n        pguser: postgres username.\n        pgpassword: postgres password.\n        pghost: hostname for the connection.\n        pgport: database port.\n        pgdatabase: database name.\n\n    \"\"\"\n\n    postgres_user: Annotated[\n        str | None,\n        Field(\n            deprecated=\"`postgres_user` is deprecated, please use `pguser`\", default=None\n        ),\n    ] = None\n    postgres_pass: Annotated[\n        str | None,\n        Field(\n            deprecated=\"`postgres_pass` is deprecated, please use `pgpassword`\",\n            default=None,\n        ),\n    ] = None\n    postgres_host_reader: Annotated[\n        str | None,\n        Field(\n            deprecated=\"`postgres_host_reader` is deprecated, please use `pghost`\",\n            default=None,\n        ),\n    ] = None\n    postgres_host_writer: Annotated[\n        str | None,\n        Field(\n            deprecated=\"`postgres_host_writer` is deprecated, please use `pghost`\",\n            default=None,\n        ),\n    ] = None\n    postgres_port: Annotated[\n        int | None,\n        Field(\n            deprecated=\"`postgres_port` is deprecated, please use `pgport`\", default=None\n        ),\n    ] = None\n    postgres_dbname: Annotated[\n        str | None,\n        Field(\n            deprecated=\"`postgres_dbname` is deprecated, please use `pgdatabase`\",\n            default=None,\n        ),\n    ] = None\n\n    pguser: str\n    pgpassword: str\n    pghost: str\n    pgport: int\n    pgdatabase: str\n\n    db_min_conn_size: int = 1\n    db_max_conn_size: int = 10\n    db_max_queries: int = 50000\n    db_max_inactive_conn_lifetime: float = 300\n\n    server_settings: ServerSettings = ServerSettings()\n\n    model_config = {\"env_file\": \".env\", \"extra\": \"ignore\"}\n\n    @model_validator(mode=\"before\")\n    @classmethod\n    def _pg_settings_compat(cls, data: Any) -&gt; Any:\n        if isinstance(data, dict):\n            compat = {\n                \"postgres_user\": \"pguser\",\n                \"postgres_pass\": \"pgpassword\",\n                \"postgres_host_reader\": \"pghost\",\n                \"postgres_host_writer\": \"pghost\",\n                \"postgres_port\": \"pgport\",\n                \"postgres_dbname\": \"pgdatabase\",\n            }\n            for old_key, new_key in compat.items():\n                if val := data.get(old_key, None):\n                    warnings.warn(\n                        f\"`{old_key}` is deprecated, please use `{new_key}`\",\n                        DeprecationWarning,\n                        stacklevel=1,\n                    )\n                    data[new_key] = val\n\n            if (pgh_reader := data.get(\"postgres_host_reader\")) and (\n                pgh_writer := data.get(\"postgres_host_writer\")\n            ):\n                if pgh_reader != pgh_writer:\n                    raise ValueError(\n                        \"In order to use different host values for reading and writing \"\n                        \"you must explicitly provide write_postgres_settings to the connect_to_db function\"\n                    )\n\n        return data\n\n    @property\n    def connection_string(self):\n        \"\"\"Create reader psql connection string.\"\"\"\n        return f\"postgresql://{self.pguser}:{quote(self.pgpassword)}@{self.pghost}:{self.pgport}/{self.pgdatabase}\"\n</code></pre>"},{"location":"api/stac_fastapi/pgstac/config/#stac_fastapi.pgstac.config.PostgresSettings.connection_string","title":"connection_string  <code>property</code>","text":"<pre><code>connection_string\n</code></pre> <p>Create reader psql connection string.</p>"},{"location":"api/stac_fastapi/pgstac/config/#stac_fastapi.pgstac.config.ServerSettings","title":"ServerSettings","text":"<p>               Bases: <code>BaseModel</code></p> <p>Server runtime parameters.</p> <p>Attributes:</p> <ul> <li> <code>search_path</code>               (<code>str</code>)           \u2013            <p>Postgres search path. Defaults to \"pgstac,public\".</p> </li> <li> <code>application_name</code>               (<code>str</code>)           \u2013            <p>PgSTAC Application name. Defaults to 'pgstac'.</p> </li> </ul> Source code in <code>stac_fastapi/pgstac/config.py</code> <pre><code>class ServerSettings(BaseModel):\n    \"\"\"Server runtime parameters.\n\n    Attributes:\n        search_path: Postgres search path. Defaults to \"pgstac,public\".\n        application_name: PgSTAC Application name. Defaults to 'pgstac'.\n    \"\"\"\n\n    search_path: str = \"pgstac,public\"\n    application_name: str = \"pgstac\"\n\n    model_config = SettingsConfigDict(extra=\"allow\")\n</code></pre>"},{"location":"api/stac_fastapi/pgstac/config/#stac_fastapi.pgstac.config.Settings","title":"Settings","text":"<p>               Bases: <code>ApiSettings</code></p> <p>API settings.</p> <p>Attributes:</p> <ul> <li> <code>prefix_path</code>               (<code>str</code>)           \u2013            <p>An optional path prefix for the underyling FastAPI router.</p> </li> <li> <code>use_api_hydrate</code>               (<code>bool</code>)           \u2013            <p>perform hydration of stac items within stac-fastapi.</p> </li> <li> <code>invalid_id_chars</code>               (<code>list[str]</code>)           \u2013            <p>list of characters that are not allowed in item or collection ids.</p> </li> </ul> Source code in <code>stac_fastapi/pgstac/config.py</code> <pre><code>class Settings(ApiSettings):\n    \"\"\"API settings.\n\n    Attributes:\n        prefix_path: An optional path prefix for the underyling FastAPI router.\n        use_api_hydrate: perform hydration of stac items within stac-fastapi.\n        invalid_id_chars: list of characters that are not allowed in item or collection ids.\n\n    \"\"\"\n\n    prefix_path: str = \"\"\n    use_api_hydrate: bool = False\n    \"\"\"\n    When USE_API_HYDRATE=TRUE, PgSTAC database will receive `NO_HYDRATE=TRUE`\n\n    | use_api_hydrate | nohydrate | Hydration |\n    |             --- |       --- |       --- |\n    |           False |     False |    PgSTAC |\n    |            True |      True |       API |\n\n    ref: https://stac-utils.github.io/pgstac/pgstac/#runtime-configurations\n    \"\"\"\n    exclude_hydrate_markers: bool = True\n    \"\"\"\n    In some case, PgSTAC can return `DO_NOT_MERGE_MARKER` markers (`\ud808\udf5f\u203b`).\n    If `EXCLUDE_HYDRATE_MARKERS=TRUE` and `USE_API_HYDRATE=TRUE`, stac-fastapi-pgstac\n    will exclude those values from the responses.\n    \"\"\"\n\n    invalid_id_chars: list[str] = DEFAULT_INVALID_ID_CHARS\n    base_item_cache: type[BaseItemCache] = DefaultBaseItemCache\n\n    validate_extensions: bool = False\n    \"\"\"\n    Validate `stac_extensions` schemas against submitted data when creating or updated STAC objects.\n\n    Implies that the `Transactions` extension is enabled.\n    \"\"\"\n\n    cors_origins: Annotated[Sequence[str], BeforeValidator(str_to_list), NoDecode] = (\n        \"*\",\n    )\n    cors_origin_regex: str | None = None\n    cors_methods: Annotated[Sequence[str], BeforeValidator(str_to_list), NoDecode] = (\n        \"GET\",\n        \"POST\",\n        \"OPTIONS\",\n    )\n    cors_credentials: bool = False\n    cors_headers: Annotated[Sequence[str], BeforeValidator(str_to_list), NoDecode] = (\n        \"Content-Type\",\n    )\n\n    testing: bool = False\n\n    @model_validator(mode=\"after\")\n    def check_origins(self) -&gt; Self:\n        if self.cors_origin_regex and \"*\" in self.cors_origins:\n            raise ValueError(\n                \"Conflicting options found in API settings: `cors_origin_regex` and `*` in `cors_origins`\"\n            )\n\n        return self\n</code></pre>"},{"location":"api/stac_fastapi/pgstac/config/#stac_fastapi.pgstac.config.Settings.exclude_hydrate_markers","title":"exclude_hydrate_markers  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>exclude_hydrate_markers: bool = True\n</code></pre> <p>In some case, PgSTAC can return <code>DO_NOT_MERGE_MARKER</code> markers (<code>\ud808\udf5f\u203b</code>). If <code>EXCLUDE_HYDRATE_MARKERS=TRUE</code> and <code>USE_API_HYDRATE=TRUE</code>, stac-fastapi-pgstac will exclude those values from the responses.</p>"},{"location":"api/stac_fastapi/pgstac/config/#stac_fastapi.pgstac.config.Settings.use_api_hydrate","title":"use_api_hydrate  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>use_api_hydrate: bool = False\n</code></pre> <p>When USE_API_HYDRATE=TRUE, PgSTAC database will receive <code>NO_HYDRATE=TRUE</code></p> use_api_hydrate nohydrate Hydration False False PgSTAC True True API <p>ref: stac-utils.github.io/pgstac/pgstac/#runtime-configurations</p>"},{"location":"api/stac_fastapi/pgstac/config/#stac_fastapi.pgstac.config.Settings.validate_extensions","title":"validate_extensions  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>validate_extensions: bool = False\n</code></pre> <p>Validate <code>stac_extensions</code> schemas against submitted data when creating or updated STAC objects.</p> <p>Implies that the <code>Transactions</code> extension is enabled.</p>"},{"location":"api/stac_fastapi/pgstac/core/","title":"core","text":""},{"location":"api/stac_fastapi/pgstac/core/#stac_fastapi.pgstac.core","title":"stac_fastapi.pgstac.core","text":"<p>Item crud client.</p>"},{"location":"api/stac_fastapi/pgstac/core/#stac_fastapi.pgstac.core.CoreCrudClient","title":"CoreCrudClient","text":"<p>               Bases: <code>AsyncBaseCoreClient</code></p> <p>Client for core endpoints defined by stac.</p>"},{"location":"api/stac_fastapi/pgstac/core/#stac_fastapi.pgstac.core.CoreCrudClient.all_collections","title":"all_collections  <code>async</code>","text":"<pre><code>all_collections(\n    request: Request,\n    bbox: BBox | None = None,\n    datetime: str | None = None,\n    limit: int | None = None,\n    offset: int | None = None,\n    query: str | None = None,\n    fields: list[str] | None = None,\n    sortby: str | None = None,\n    filter_expr: str | None = None,\n    filter_lang: str | None = None,\n    **kwargs: Any\n) -&gt; Collections\n</code></pre> <p>Cross catalog search (GET).</p> <p>Called with <code>GET /collections</code>.</p> <p>Returns:</p> <ul> <li> <code>Collections</code>           \u2013            <p>Collections which match the search criteria, returns all</p> </li> <li> <code>Collections</code>           \u2013            <p>collections by default.</p> </li> </ul>"},{"location":"api/stac_fastapi/pgstac/core/#stac_fastapi.pgstac.core.CoreCrudClient.get_collection","title":"get_collection  <code>async</code>","text":"<pre><code>get_collection(collection_id: str, request: Request, **kwargs: Any) -&gt; Collection\n</code></pre> <p>Get collection by id.</p> <p>Called with <code>GET /collections/{collection_id}</code>.</p> <p>Parameters:</p> <ul> <li> <code>collection_id</code>               (<code>str</code>)           \u2013            <p>ID of the collection.</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>Collection</code>           \u2013            <p>Collection.</p> </li> </ul>"},{"location":"api/stac_fastapi/pgstac/core/#stac_fastapi.pgstac.core.CoreCrudClient.get_item","title":"get_item  <code>async</code>","text":"<pre><code>get_item(item_id: str, collection_id: str, request: Request, **kwargs: Any) -&gt; Item\n</code></pre> <p>Get item by id.</p> <p>Called with <code>GET /collections/{collection_id}/items/{item_id}</code>.</p> <p>Parameters:</p> <ul> <li> <code>item_id</code>               (<code>str</code>)           \u2013            <p>ID of the item.</p> </li> <li> <code>collection_id</code>               (<code>str</code>)           \u2013            <p>ID of the collection the item is in.</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>Item</code>           \u2013            <p>Item.</p> </li> </ul>"},{"location":"api/stac_fastapi/pgstac/core/#stac_fastapi.pgstac.core.CoreCrudClient.get_search","title":"get_search  <code>async</code>","text":"<pre><code>get_search(\n    request: Request,\n    collections: list[str] | None = None,\n    ids: list[str] | None = None,\n    bbox: BBox | None = None,\n    intersects: str | None = None,\n    datetime: str | None = None,\n    limit: int | None = None,\n    query: str | None = None,\n    fields: list[str] | None = None,\n    sortby: str | None = None,\n    filter_expr: str | None = None,\n    filter_lang: str | None = None,\n    token: str | None = None,\n    **kwargs: Any\n) -&gt; ItemCollection\n</code></pre> <p>Cross catalog search (GET).</p> <p>Called with <code>GET /search</code>.</p> <p>Returns:</p> <ul> <li> <code>ItemCollection</code>           \u2013            <p>ItemCollection containing items which match the search criteria.</p> </li> </ul>"},{"location":"api/stac_fastapi/pgstac/core/#stac_fastapi.pgstac.core.CoreCrudClient.item_collection","title":"item_collection  <code>async</code>","text":"<pre><code>item_collection(\n    collection_id: str,\n    request: Request,\n    bbox: BBox | None = None,\n    datetime: str | None = None,\n    limit: int | None = None,\n    query: str | None = None,\n    fields: list[str] | None = None,\n    sortby: str | None = None,\n    filter_expr: str | None = None,\n    filter_lang: str | None = None,\n    token: str | None = None,\n    **kwargs: Any\n) -&gt; ItemCollection\n</code></pre> <p>Get all items from a specific collection.</p> <p>Called with <code>GET /collections/{collection_id}/items</code></p> <p>Parameters:</p> <ul> <li> <code>collection_id</code>               (<code>str</code>)           \u2013            <p>id of the collection.</p> </li> <li> <code>limit</code>               (<code>int | None</code>, default:                   <code>None</code> )           \u2013            <p>number of items to return.</p> </li> <li> <code>token</code>               (<code>str | None</code>, default:                   <code>None</code> )           \u2013            <p>pagination token.</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>ItemCollection</code>           \u2013            <p>An ItemCollection.</p> </li> </ul>"},{"location":"api/stac_fastapi/pgstac/core/#stac_fastapi.pgstac.core.CoreCrudClient.post_search","title":"post_search  <code>async</code>","text":"<pre><code>post_search(search_request: PgstacSearch, request: Request, **kwargs: Any) -&gt; ItemCollection\n</code></pre> <p>Cross catalog search (POST).</p> <p>Called with <code>POST /search</code>.</p> <p>Parameters:</p> <ul> <li> <code>search_request</code>               (<code>PgstacSearch</code>)           \u2013            <p>search request parameters.</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>ItemCollection</code>           \u2013            <p>ItemCollection containing items which match the search criteria.</p> </li> </ul>"},{"location":"api/stac_fastapi/pgstac/core/#stac_fastapi.pgstac.core.health_check","title":"health_check  <code>async</code>","text":"<pre><code>health_check(request: Request) -&gt; dict | JSONResponse\n</code></pre> <p>PgSTAC HealthCheck.</p>"},{"location":"api/stac_fastapi/pgstac/db/","title":"db","text":""},{"location":"api/stac_fastapi/pgstac/db/#stac_fastapi.pgstac.db","title":"stac_fastapi.pgstac.db","text":"<p>Database connection handling.</p>"},{"location":"api/stac_fastapi/pgstac/db/#stac_fastapi.pgstac.db.close_db_connection","title":"close_db_connection  <code>async</code>","text":"<pre><code>close_db_connection(app: FastAPI) -&gt; None\n</code></pre> <p>Close connection.</p> Source code in <code>stac_fastapi/pgstac/db.py</code> <pre><code>async def close_db_connection(app: FastAPI) -&gt; None:\n    \"\"\"Close connection.\"\"\"\n    if pool := getattr(app.state, \"readpool\", None):\n        await pool.close()\n    if pool := getattr(app.state, \"writepool\", None):\n        await pool.close()\n</code></pre>"},{"location":"api/stac_fastapi/pgstac/db/#stac_fastapi.pgstac.db.con_init","title":"con_init  <code>async</code>","text":"<pre><code>con_init(conn)\n</code></pre> <p>Use orjson for json returns.</p> Source code in <code>stac_fastapi/pgstac/db.py</code> <pre><code>async def con_init(conn):\n    \"\"\"Use orjson for json returns.\"\"\"\n    await conn.set_type_codec(\n        \"json\",\n        encoder=orjson.dumps,\n        decoder=orjson.loads,\n        schema=\"pg_catalog\",\n    )\n    await conn.set_type_codec(\n        \"jsonb\",\n        encoder=orjson.dumps,\n        decoder=orjson.loads,\n        schema=\"pg_catalog\",\n    )\n</code></pre>"},{"location":"api/stac_fastapi/pgstac/db/#stac_fastapi.pgstac.db.connect_to_db","title":"connect_to_db  <code>async</code>","text":"<pre><code>connect_to_db(\n    app: FastAPI,\n    get_conn: ConnectionGetter | None = None,\n    postgres_settings: PostgresSettings | None = None,\n    add_write_connection_pool: bool = False,\n    write_postgres_settings: PostgresSettings | None = None,\n) -&gt; None\n</code></pre> <p>Create connection pools &amp; connection retriever on application.</p> Source code in <code>stac_fastapi/pgstac/db.py</code> <pre><code>async def connect_to_db(\n    app: FastAPI,\n    get_conn: ConnectionGetter | None = None,\n    postgres_settings: PostgresSettings | None = None,\n    add_write_connection_pool: bool = False,\n    write_postgres_settings: PostgresSettings | None = None,\n) -&gt; None:\n    \"\"\"Create connection pools &amp; connection retriever on application.\"\"\"\n    if not postgres_settings:\n        # NOTE: for some reason mypy fails to recognize that attributes can be set by Env\n        postgres_settings = PostgresSettings()  # type: ignore\n\n    app.state.readpool = await _create_pool(postgres_settings)\n\n    if add_write_connection_pool:\n        if not write_postgres_settings:\n            write_postgres_settings = postgres_settings\n\n        app.state.writepool = await _create_pool(write_postgres_settings)\n\n    app.state.get_connection = get_conn if get_conn else get_connection\n</code></pre>"},{"location":"api/stac_fastapi/pgstac/db/#stac_fastapi.pgstac.db.dbfunc","title":"dbfunc  <code>async</code>","text":"<pre><code>dbfunc(conn: Connection, func: str, arg: str | dict | list)\n</code></pre> <p>Wrap PLPGSQL Functions.</p> <p>Keyword arguments: pool -- the asyncpg pool to use to connect to the database func -- the name of the PostgreSQL function to call arg -- the argument to the PostgreSQL function as either a string or a dict that will be converted into jsonb</p> Source code in <code>stac_fastapi/pgstac/db.py</code> <pre><code>async def dbfunc(conn: Connection, func: str, arg: str | dict | list):\n    \"\"\"Wrap PLPGSQL Functions.\n\n    Keyword arguments:\n    pool -- the asyncpg pool to use to connect to the database\n    func -- the name of the PostgreSQL function to call\n    arg -- the argument to the PostgreSQL function as either a string\n    or a dict that will be converted into jsonb\n    \"\"\"\n    with translate_pgstac_errors():\n        if isinstance(arg, str):\n            q, p = render(\n                \"\"\"\n                SELECT * FROM :func(:item::text);\n                \"\"\",\n                func=V(func),\n                item=arg,\n            )\n            return await conn.fetchval(q, *p)\n        else:\n            q, p = render(\n                \"\"\"\n                SELECT * FROM :func(:item::text::jsonb);\n                \"\"\",\n                func=V(func),\n                item=json.dumps(arg),\n            )\n            return await conn.fetchval(q, *p)\n</code></pre>"},{"location":"api/stac_fastapi/pgstac/db/#stac_fastapi.pgstac.db.get_connection","title":"get_connection  <code>async</code>","text":"<pre><code>get_connection(request: Request, readwrite: Literal['r', 'w'] = 'r') -&gt; AsyncIterator[Connection]\n</code></pre> <p>Retrieve connection from database conection pool.</p> Source code in <code>stac_fastapi/pgstac/db.py</code> <pre><code>@asynccontextmanager\nasync def get_connection(\n    request: Request,\n    readwrite: Literal[\"r\", \"w\"] = \"r\",\n) -&gt; AsyncIterator[Connection]:\n    \"\"\"Retrieve connection from database conection pool.\"\"\"\n    pool = request.app.state.readpool\n    if readwrite == \"w\":\n        pool = getattr(request.app.state, \"writepool\", None)\n        if not pool:\n            raise HTTPException(\n                status_code=500,\n                detail=\"Could not find connection pool for write operations\",\n            )\n\n    with translate_pgstac_errors():\n        async with pool.acquire() as conn:\n            yield conn\n</code></pre>"},{"location":"api/stac_fastapi/pgstac/db/#stac_fastapi.pgstac.db.translate_pgstac_errors","title":"translate_pgstac_errors","text":"<pre><code>translate_pgstac_errors() -&gt; Generator[None, None, None]\n</code></pre> <p>Context manager that translates pgstac errors into FastAPI errors.</p> Source code in <code>stac_fastapi/pgstac/db.py</code> <pre><code>@contextmanager\ndef translate_pgstac_errors() -&gt; Generator[None, None, None]:\n    \"\"\"Context manager that translates pgstac errors into FastAPI errors.\"\"\"\n    try:\n        yield\n    except exceptions.UniqueViolationError as e:\n        raise ConflictError from e\n    except exceptions.NoDataFoundError as e:\n        raise NotFoundError from e\n    except exceptions.NotNullViolationError as e:\n        raise DatabaseError from e\n    except exceptions.ForeignKeyViolationError as e:\n        raise ForeignKeyError from e\n</code></pre>"},{"location":"api/stac_fastapi/pgstac/transactions/","title":"transactions","text":""},{"location":"api/stac_fastapi/pgstac/transactions/#stac_fastapi.pgstac.transactions","title":"stac_fastapi.pgstac.transactions","text":"<p>transactions extension client.</p>"},{"location":"api/stac_fastapi/pgstac/transactions/#stac_fastapi.pgstac.transactions.BulkTransactionsClient","title":"BulkTransactionsClient","text":"<p>               Bases: <code>AsyncBaseBulkTransactionsClient</code>, <code>ClientValidateMixIn</code></p> <p>Postgres bulk transactions.</p>"},{"location":"api/stac_fastapi/pgstac/transactions/#stac_fastapi.pgstac.transactions.BulkTransactionsClient.bulk_item_insert","title":"bulk_item_insert  <code>async</code>","text":"<pre><code>bulk_item_insert(items: Items, request: Request, **kwargs) -&gt; str\n</code></pre> <p>Bulk item insertion using pgstac.</p>"},{"location":"api/stac_fastapi/pgstac/transactions/#stac_fastapi.pgstac.transactions.ClientValidateMixIn","title":"ClientValidateMixIn","text":""},{"location":"api/stac_fastapi/pgstac/transactions/#stac_fastapi.pgstac.transactions.TransactionsClient","title":"TransactionsClient","text":"<p>               Bases: <code>AsyncBaseTransactionsClient</code>, <code>ClientValidateMixIn</code></p> <p>Transactions extension specific CRUD operations.</p>"},{"location":"api/stac_fastapi/pgstac/transactions/#stac_fastapi.pgstac.transactions.TransactionsClient.create_collection","title":"create_collection  <code>async</code>","text":"<pre><code>create_collection(collection: Collection, request: Request, **kwargs) -&gt; Collection\n</code></pre> <p>Create collection.</p>"},{"location":"api/stac_fastapi/pgstac/transactions/#stac_fastapi.pgstac.transactions.TransactionsClient.create_item","title":"create_item  <code>async</code>","text":"<pre><code>create_item(\n    collection_id: str, item: Item | ItemCollection, request: Request, **kwargs\n) -&gt; Item | Response | None\n</code></pre> <p>Create item.</p>"},{"location":"api/stac_fastapi/pgstac/transactions/#stac_fastapi.pgstac.transactions.TransactionsClient.delete_collection","title":"delete_collection  <code>async</code>","text":"<pre><code>delete_collection(collection_id: str, request: Request, **kwargs) -&gt; Response\n</code></pre> <p>Delete collection.</p>"},{"location":"api/stac_fastapi/pgstac/transactions/#stac_fastapi.pgstac.transactions.TransactionsClient.delete_item","title":"delete_item  <code>async</code>","text":"<pre><code>delete_item(item_id: str, collection_id: str, request: Request, **kwargs) -&gt; Response\n</code></pre> <p>Delete item.</p>"},{"location":"api/stac_fastapi/pgstac/transactions/#stac_fastapi.pgstac.transactions.TransactionsClient.patch_collection","title":"patch_collection  <code>async</code>","text":"<pre><code>patch_collection(\n    collection_id: str, patch: PartialCollection | list[PatchOperation], request: Request, **kwargs\n) -&gt; Collection\n</code></pre> <p>Patch Collection.</p>"},{"location":"api/stac_fastapi/pgstac/transactions/#stac_fastapi.pgstac.transactions.TransactionsClient.patch_item","title":"patch_item  <code>async</code>","text":"<pre><code>patch_item(\n    collection_id: str,\n    item_id: str,\n    patch: PartialItem | list[PatchOperation],\n    request: Request,\n    **kwargs\n) -&gt; Item\n</code></pre> <p>Patch Item.</p>"},{"location":"api/stac_fastapi/pgstac/transactions/#stac_fastapi.pgstac.transactions.TransactionsClient.update_collection","title":"update_collection  <code>async</code>","text":"<pre><code>update_collection(collection: Collection, request: Request, **kwargs) -&gt; Collection\n</code></pre> <p>Update collection.</p>"},{"location":"api/stac_fastapi/pgstac/transactions/#stac_fastapi.pgstac.transactions.TransactionsClient.update_item","title":"update_item  <code>async</code>","text":"<pre><code>update_item(request: Request, collection_id: str, item_id: str, item: Item, **kwargs) -&gt; Item\n</code></pre> <p>Update item.</p>"},{"location":"api/stac_fastapi/pgstac/utils/","title":"utils","text":""},{"location":"api/stac_fastapi/pgstac/utils/#stac_fastapi.pgstac.utils","title":"stac_fastapi.pgstac.utils","text":"<p>stac-fastapi utility methods.</p>"},{"location":"api/stac_fastapi/pgstac/utils/#stac_fastapi.pgstac.utils.dict_deep_update","title":"dict_deep_update","text":"<pre><code>dict_deep_update(merge_to: dict[str, Any], merge_from: dict[str, Any]) -&gt; None\n</code></pre> <p>Perform a deep update of two dicts.</p> <p>merge_to is updated in-place with the values from merge_from. merge_from values take precedence over existing values in merge_to.</p>"},{"location":"api/stac_fastapi/pgstac/utils/#stac_fastapi.pgstac.utils.filter_fields","title":"filter_fields","text":"<pre><code>filter_fields(item: Item, include: set[str] | None = None, exclude: set[str] | None = None) -&gt; Item\n</code></pre> <p>Preserve and remove fields as indicated by the fields extension include/exclude sets.</p> <p>Returns a shallow copy of the Item with the fields filtered.</p> <p>This will not perform a deep copy; values of the original item will be referenced in the return item.</p>"},{"location":"api/stac_fastapi/pgstac/extensions/","title":"Module stac_fastapi.pgstac.extensions","text":"<p>pgstac extension customisations.</p>"},{"location":"api/stac_fastapi/pgstac/extensions/#sub-modules","title":"Sub-modules","text":"<ul> <li>stac_fastapi.pgstac.extensions.filter</li> <li>stac_fastapi.pgstac.extensions.query</li> </ul>"},{"location":"api/stac_fastapi/pgstac/extensions/filter/","title":"filter","text":""},{"location":"api/stac_fastapi/pgstac/extensions/filter/#stac_fastapi.pgstac.extensions.filter","title":"stac_fastapi.pgstac.extensions.filter","text":"<p>Get Queryables.</p>"},{"location":"api/stac_fastapi/pgstac/extensions/filter/#stac_fastapi.pgstac.extensions.filter.FiltersClient","title":"FiltersClient","text":"<p>               Bases: <code>AsyncBaseFiltersClient</code></p> <p>Defines a pattern for implementing the STAC filter extension.</p>"},{"location":"api/stac_fastapi/pgstac/extensions/filter/#stac_fastapi.pgstac.extensions.filter.FiltersClient.get_queryables","title":"get_queryables  <code>async</code>","text":"<pre><code>get_queryables(request: Request, collection_id: str | None = None, **kwargs: Any) -&gt; dict[str, Any]\n</code></pre> <p>Get the queryables available for the given collection_id.</p> <p>If collection_id is None, returns the intersection of all queryables over all collections. This base implementation returns a blank queryable schema. This is not allowed under OGC CQL but it is allowed by the STAC API Filter Extension github.com/radiantearth/stac-api-spec/tree/master/fragments/filter#queryables</p>"},{"location":"api/stac_fastapi/pgstac/extensions/query/","title":"query","text":""},{"location":"api/stac_fastapi/pgstac/extensions/query/#stac_fastapi.pgstac.extensions.query","title":"stac_fastapi.pgstac.extensions.query","text":"<p>Pgstac query customisation.</p>"},{"location":"api/stac_fastapi/pgstac/extensions/query/#stac_fastapi.pgstac.extensions.query.Operator","title":"Operator","text":"<p>               Bases: <code>str</code>, <code>AutoValueEnum</code></p> <p>Defines the set of operators supported by the API.</p>"},{"location":"api/stac_fastapi/pgstac/extensions/query/#stac_fastapi.pgstac.extensions.query.Operator.operator","title":"operator","text":"<pre><code>operator() -&gt; Callable[[Any, Any], bool]\n</code></pre> <p>Return python operator.</p>"},{"location":"api/stac_fastapi/pgstac/extensions/query/#stac_fastapi.pgstac.extensions.query.QueryExtension","title":"QueryExtension","text":"<p>               Bases: <code>QueryExtension</code></p> <p>Query Extension.</p> <p>Override the POST request model to add validation against supported fields</p>"},{"location":"api/stac_fastapi/pgstac/extensions/query/#stac_fastapi.pgstac.extensions.query.QueryExtensionPostRequest","title":"QueryExtensionPostRequest","text":"<p>               Bases: <code>BaseModel</code></p> <p>Query Extension POST request model.</p>"},{"location":"api/stac_fastapi/pgstac/models/","title":"Module stac_fastapi.pgstac.models","text":"<p>stac_fastapi.pgstac.models module.</p>"},{"location":"api/stac_fastapi/pgstac/models/#sub-modules","title":"Sub-modules","text":"<ul> <li>stac_fastapi.pgstac.models.links</li> </ul>"},{"location":"api/stac_fastapi/pgstac/models/links/","title":"links","text":""},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links","title":"stac_fastapi.pgstac.models.links","text":"<p>link helpers.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.BaseLinks","title":"BaseLinks","text":"<p>Create inferred links common to collections and items.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.BaseLinks.base_url","title":"base_url  <code>property</code>","text":"<pre><code>base_url\n</code></pre> <p>Get the base url.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.BaseLinks.url","title":"url  <code>property</code>","text":"<pre><code>url\n</code></pre> <p>Get the current request url.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.BaseLinks.create_links","title":"create_links","text":"<pre><code>create_links() -&gt; list[dict[str, Any]]\n</code></pre> <p>Return all inferred links.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.BaseLinks.get_links","title":"get_links  <code>async</code>","text":"<pre><code>get_links(extra_links: list[dict[str, Any]] | None = None) -&gt; list[dict[str, Any]]\n</code></pre> <p>Generate all the links.</p> <p>Get the links object for a stac resource by iterating through available methods on this class that start with link_.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.BaseLinks.link_root","title":"link_root","text":"<pre><code>link_root() -&gt; dict\n</code></pre> <p>Return the catalog root.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.BaseLinks.link_self","title":"link_self","text":"<pre><code>link_self() -&gt; dict\n</code></pre> <p>Return the self link.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.BaseLinks.resolve","title":"resolve","text":"<pre><code>resolve(url)\n</code></pre> <p>Resolve url to the current request url.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.CollectionLinks","title":"CollectionLinks","text":"<p>               Bases: <code>CollectionLinksBase</code></p> <p>Create inferred links specific to collections.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.CollectionLinks.link_items","title":"link_items","text":"<pre><code>link_items() -&gt; dict\n</code></pre> <p>Create the <code>item</code> link.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.CollectionLinks.link_parent","title":"link_parent","text":"<pre><code>link_parent() -&gt; dict\n</code></pre> <p>Create the <code>parent</code> link.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.CollectionLinks.link_self","title":"link_self","text":"<pre><code>link_self() -&gt; dict\n</code></pre> <p>Return the self link.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.CollectionLinksBase","title":"CollectionLinksBase","text":"<p>               Bases: <code>BaseLinks</code></p> <p>Create inferred links specific to collections.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.CollectionLinksBase.collection_link","title":"collection_link","text":"<pre><code>collection_link(rel: str = value) -&gt; dict\n</code></pre> <p>Create a link to a collection.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.CollectionSearchPagingLinks","title":"CollectionSearchPagingLinks","text":"<p>               Bases: <code>BaseLinks</code></p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.CollectionSearchPagingLinks.link_next","title":"link_next","text":"<pre><code>link_next() -&gt; dict[str, Any] | None\n</code></pre> <p>Create link for next page.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.ItemCollectionLinks","title":"ItemCollectionLinks","text":"<p>               Bases: <code>CollectionLinksBase</code></p> <p>Create inferred links specific to collections.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.ItemCollectionLinks.link_collection","title":"link_collection","text":"<pre><code>link_collection() -&gt; dict\n</code></pre> <p>Create the <code>collection</code> link.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.ItemCollectionLinks.link_parent","title":"link_parent","text":"<pre><code>link_parent() -&gt; dict\n</code></pre> <p>Create the <code>parent</code> link.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.ItemCollectionLinks.link_self","title":"link_self","text":"<pre><code>link_self() -&gt; dict\n</code></pre> <p>Return the self link.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.ItemLinks","title":"ItemLinks","text":"<p>               Bases: <code>CollectionLinksBase</code></p> <p>Create inferred links specific to items.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.ItemLinks.link_collection","title":"link_collection","text":"<pre><code>link_collection() -&gt; dict\n</code></pre> <p>Create the <code>collection</code> link.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.ItemLinks.link_parent","title":"link_parent","text":"<pre><code>link_parent() -&gt; dict\n</code></pre> <p>Create the <code>parent</code> link.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.ItemLinks.link_self","title":"link_self","text":"<pre><code>link_self() -&gt; dict\n</code></pre> <p>Create the self link.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.PagingLinks","title":"PagingLinks","text":"<p>               Bases: <code>BaseLinks</code></p> <p>Create links for paging.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.PagingLinks.link_next","title":"link_next","text":"<pre><code>link_next() -&gt; dict[str, Any] | None\n</code></pre> <p>Create link for next page.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.PagingLinks.link_prev","title":"link_prev","text":"<pre><code>link_prev() -&gt; dict[str, Any] | None\n</code></pre> <p>Create link for previous page.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.SearchLinks","title":"SearchLinks","text":"<p>               Bases: <code>BaseLinks</code></p> <p>Create inferred links specific to collections.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.SearchLinks.link_self","title":"link_self","text":"<pre><code>link_self() -&gt; dict\n</code></pre> <p>Return the self link.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.filter_links","title":"filter_links","text":"<pre><code>filter_links(links: list[dict]) -&gt; list[dict]\n</code></pre> <p>Remove inferred links.</p>"},{"location":"api/stac_fastapi/pgstac/models/links/#stac_fastapi.pgstac.models.links.merge_params","title":"merge_params","text":"<pre><code>merge_params(url: str, newparams: dict) -&gt; str\n</code></pre> <p>Merge url parameters.</p>"}]}